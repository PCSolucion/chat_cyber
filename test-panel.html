<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Test Panel - Cyberpunk Chat Widget</title>
    <link rel="icon" type="image/png" href="img/netrunner.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Reusa los estilos del widget principal -->
    <link rel="stylesheet" href="css/bundle.css">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <!-- Reusa los estilos del widget principal -->
    <link rel="stylesheet" href="css/bundle.css">
    <link rel="stylesheet" href="css/test-panel.css">
</head>
<body>
    <!-- Widget Preview -->
    <div class="widget-container" id="preview-container">
        <span class="widget-label">LIVE_PREVIEW // 2K (1440p)</span>
        <iframe id="widget-frame" src="index.html"></iframe>
    </div>

    <!-- Test Panel -->
    <div id="test-panel">
        <h3 class="panel-title">SYSTEM_CONSOLE</h3>

        <div class="panel-scroll-area">
            <div class="panel-section">
                <label class="checkbox-label">
                    <input type="checkbox" id="keep-visible-checkbox">
                    OVR_VISIBILITY_LOCK
                </label>

                <div style="margin-bottom: 20px;">
                    <label class="panel-label">ENVIRONMENT_SELECT:</label>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                        <button onclick="changeBG('img/fondo pruebas.webp')" class="btn btn--full" style="font-size: 9px; text-align: center;">BG_1</button>
                        <button onclick="changeBG('img/fondo pruebas2.png')" class="btn btn--full" style="font-size: 9px; text-align: center;">BG_2</button>
                    </div>
                </div>

                <label class="panel-label">Input Buffer:</label>
                <input type="text" id="test-message" value="ACCESS_GRANTED: Initializing test protocol..." class="panel-input">
                
                <div style="display: flex; gap: 8px; margin-top: 12px; background: rgba(0,0,0,0.4); padding: 8px; border: 1px solid var(--border-glow);">
                    <label class="checkbox-label" style="color: #00ff64; font-size: 10px; margin-bottom: 0; flex: 1;">
                        <input type="checkbox" id="mod-toggle"> MOD
                    </label>
                    <label class="checkbox-label" style="color: var(--purple); font-size: 10px; margin-bottom: 0; flex: 1;">
                        <input type="checkbox" id="vip-toggle"> VIP
                    </label>
                    <label class="checkbox-label" style="color: var(--gold); font-size: 10px; margin-bottom: 0; flex: 1;">
                        <input type="checkbox" id="sub-toggle"> SUB
                    </label>
                </div>
            </div>


            <div class="divider">
                <label class="panel-label">Manual User Override:</label>
                <div style="display: flex; gap: 5px; margin-bottom: 8px;">
                     <button id="broadcaster-btn" onclick="testUser('liiukiin')" class="btn btn--purple btn--full" style="text-align: center;">üëë BROADCASTER</button>
                </div>
                <div class="button-row">
                    <input type="text" id="custom-user" placeholder="NAME_ENTRY..." class="panel-input" style="flex: 1;">
                    <button onclick="testUser(document.getElementById('custom-user').value)"
                        class="btn btn--cyan" style="min-width: 60px;">EXEC</button>
                </div>
            </div>

            <div class="divider">
                <label class="panel-label">Streak Simulation:</label>
                <div class="button-row">
                    <input type="number" id="streak-days" value="5" min="1"
                        class="panel-input" style="flex: 1; color: var(--gold); border-color: rgba(255,215,0,0.2);">
                    <button onclick="testStreak(document.getElementById('streak-days').value)" class="btn btn--gold">LOAD</button>
                </div>
            </div>

            <div class="divider">
                <label class="panel-label" style="color: var(--red);">System Data Controls:</label>
                <div class="button-row">
                    <button onclick="callWidgetFunction('xp.exportData')" class="btn btn--full btn--green"
                        style="flex: 1; text-align: center;">EXPORT BACKUP (JSON)</button>
                </div>
                <div style="margin-top: 10px; display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                    <button onclick="callWidgetFunction('gist.testConnection')" class="btn btn--top1 btn--full" style="font-size: 9px;">üì° GIST</button>
                    <button onclick="callWidgetFunction('achievements.test')" class="btn btn--top btn--full" style="font-size: 9px;">üèÜ ACHV</button>
                </div>
                <button onclick="testLevelUp()" class="btn btn--full btn--purple" style="margin-top: 8px; text-align: center;">üöÄ TEST_LEVEL_UP</button>
            </div>

            <div class="divider">
                <label class="panel-label" style="color: var(--cyan);">Mode Overrides:</label>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                    <button onclick="callWidgetFunction('idle.forceMode')" class="btn btn--top1 btn--full" style="font-size: 9px; text-align: center;">STATS</button>
                    <button onclick="callWidgetFunction('emotes.showStats')" class="btn btn--purple btn--full" style="font-size: 9px; text-align: center;">EMOTES</button>
                </div>
                <button onclick="callWidgetFunction('emotes.testMessage')" class="btn btn--full btn--green" style="margin-top: 8px; text-align: center;">‚ú® SYNC_EMOTES</button>
            </div>
        </div>

        <div class="divider">
            <label class="panel-label">System Logs:</label>
            <div id="panel-logs" style="
                height: 100px; 
                overflow-y: auto; 
                background: rgba(0,0,0,0.5); 
                border: 1px solid var(--border-glow); 
                padding: 5px; 
                font-family: 'Share Tech Mono'; 
                font-size: 10px; 
                color: #aaa;
                display: flex;
                flex-direction: column;
            ">
                <div>_init_console...</div>
            </div>
        </div>
    </div>
        
        <div class="panel-footer" style="padding-top: 15px; border-top: 1px solid var(--border-glow); margin-top: auto; font-family: 'Share Tech Mono';">
            PROTOCOL_CONNECTED // STANDBY
        </div>
    </div>

    <script src="js/test-panel.js"></script>
</body>

</html>